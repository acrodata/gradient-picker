<div class="gradient-stops-slider">
  <div
    #sliderTrack
    class="gradient-stops-slider-track"
    [class.is-dragging]="isDragging"
    [style.background]="gradientColor"
    (pointerdown)="addStop($event)"
  >
    @for (stop of _stops; track $index) {
      <div
        class="gradient-stop"
        cdkDrag
        cdkDragLockAxis="x"
        [cdkDragBoundary]="sliderTrack"
        [cdkDragFreeDragPosition]="stop.position"
        (cdkDragStarted)="onDragStart($event)"
        (cdkDragMoved)="onDragMove($event, stop, $index)"
        (cdkDragEnded)="onDragEnd($event, stop)"
        (pointerdown)="onDragHandleDown($event)"
        (pointerup)="onDragHandleUp($event)"
      >
        <div class="gradient-stop-drag-handle"></div>
      </div>
    }
  </div>
</div>

<div class="gradient-stops-list-wrapper">
  <ul class="gradient-stops-list">
    @for (stop of _stops; track $index) {
      <li class="gradient-stop-item">
        <gradient-colorpicker [(ngModel)]="stop.color" (ngModelChange)="onStopColorChange(stop)" />
        <input type="text" [(ngModel)]="stop.offset!.value" (change)="onStopOffsetChange(stop)" />
        <button (click)="onStopRemove(stop)">x</button>
      </li>
    }
  </ul>
</div>
